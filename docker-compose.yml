version: '3'

services:
  nginx:
      build: ./nginx/
      image: nightlinus/hermes:nginx
      container_name: web-server
  php73:
    build:
      context: ./php/
      dockerfile: php73-fpm-xdebug.Dockerfile
    image: nightlinus/hermes:7.3-fpm-xdebug
    container_name: php73-xdebug
  composer:
      build:
        context: ./php/
        dockerfile: php74-composer.Dockerfile
      image: nightlinus/composer
      container_name: php74-composer
  rabbitmq:
      build:
        context: .
        dockerfile: ./rabbitmq.Dockerfile
      image: nightlinus/rabbitmq
      container_name: rabbitmq
  php74blackfire:
    build:
      context: ./php/
      dockerfile: php74-fpm-blackfire.Dockerfile
    image: nightlinus/hermes:7.4-fpm-blackfire
    container_name: php74-blackfire
  php74:
    build:
      context: ./php/
      dockerfile: php74-fpm-xdebug.Dockerfile
    image: nightlinus/hermes:7.4-fpm-xdebug
    container_name: php74-xdebug
